<!DOCTYPE html>
<html lang="ko">

    <head>
        <!-- Webpage Title -->
        <title>ì˜í™” | Korea, Hello Marvel!</title>

        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
              integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
              crossorigin="anonymous">

        <!-- JS -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
                integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
                crossorigin="anonymous"></script>

        <script type="text/javascript">

            $(document).ready(function () {
                showReview(); //ë¡œë”©ë˜ìë§ˆì ë¶ˆë¦¼
            });

            function makeReview() {
                let title = $('#name').val()
                let author = $('#movie').val()
                let review = $('#reivew').val()

                $.ajax({
                    type: "POST",
                    url: "/review",
                    data: {name_give:name,movie_give:movie,review_give:review},
                    success: function (response) {
                        alert(response["msg"]);
                        window.location.reload();
                    }
                })
            }

            function showReview() {
                $.ajax({
                    type: "GET",
                    url: "/review",
                    data: {},
                    success: function (response) {
                        let reviews = response['all_reviews']
                        for (let i = 0; i < reviews.length; i++) {
                            let name = reviews[i]['name']
                            let movie= reviews[i]['movie']
                            let review = reviews[i]['review']

                            let temp_html = `<tr>
                                                <td>${name}</td>
                                                <td>${movie}</td>
                                                <td>${review}</td>
                                            </tr>`
                            $('#reviews-box').append(temp_html)
                        }
                    }
                })
            }

        </script>


    <style>
        .a {
            margin: 80px 75px 80px 75px;
        }

    </style>

</head>

<body>

<div class="a">
    <div>
        <div class="mb-3">
            <label class="form-label">id</label>
            <input id="name" type="text" placeholder="Jeongah">
            <label class="form-label" style="margin-left: 40px;">ì˜í™”ì œëª©</label>
            <input id="movie" type="text" list="ì˜í™”ì¢…ë¥˜" placeholder="--ì˜í™” ì„ íƒ--">
            <datalist id="ì˜í™”ì¢…ë¥˜">
                <option value="ìº¡í‹´ ì•„ë©”ë¦¬ì¹´: í¼ìŠ¤íŠ¸ì–´ë²¤ì ¸"></option>
                <option value="ì•„ì´ì–¸ë§¨"></option>
                <option value="ì¸í¬ë ˆë”ë¸” í—í¬"></option>
                <option value="ì•„ì´ì–¸ë§¨2"></option>
                <option value="í† ë¥´: ì²œë‘¥ì˜ ì‹ "></option>
                <option value="ì–´ë²¤ì ¸ìŠ¤"></option>
                <option value="ì•„ì´ì–¸ë§¨3"></option>
                <option value="í† ë¥´: ë‹¤í¬ì›”ë“œ"></option>
                <option value="ìº¡í‹´ ì•„ë©”ë¦¬ì¹´: ìœ„í„°ì†”ì ¸"></option>
                <option value="ê°€ë””ì–¸ì¦ˆ ì˜¤ë¸Œ ê°¤ëŸ­ì‹œ1"></option>
                <option value="ê°€ë””ì–¸ì¦ˆ ì˜¤ë¸Œ ê°¤ëŸ­ì‹œ2"></option>
                <option value="ì–´ë²¤ì ¸ìŠ¤: ì—ì´ì§€ì˜¤ë¸Œìš¸íŠ¸ë¡ "></option>
                <option value="ì•¤íŠ¸ë§¨"></option>
                <option value="ìº¡í‹´ ì•„ë©”ë¦¬ì¹´: ì‹œë¹Œì›Œ"></option>
                <option value="ë‹¥í„° ìŠ¤íŠ¸ë ˆì¸ì§€"></option>
                <option value="ìŠ¤íŒŒì´ë”ë§¨: í™ˆì»¤ë°"></option>
                <option value="í† ë¥´: ë¼ê·¸ë‚˜ë¡œí¬"></option>
                <option value="ë¸”ë™íŒ¬ì„œ"></option>
                <option value="ì–´ë²¤ì ¸ìŠ¤: ì¸í”¼ë‹ˆí‹° ì›Œ"></option>
                <option value="ì•¤íŠ¸ë§¨ê³¼ ì™€ìŠ¤í”„"></option>
                <option value="ìº¡í‹´ë§ˆë¸”"></option>
                <option value="ì–´ë²¤ì ¸ìŠ¤: ì—”ë“œê²Œì„"></option>
                <option value="ë¸”ë™ìœ„ë„ìš°"></option>
                <option value="ê¸°íƒ€ëŠ” ì§ì ‘ ì ì–´ì£¼ì„¸ìš”"></option>
            </datalist>
        </div>
        <div class="mb-3">
            <label class="form-label">ì˜í™”í›„ê¸°(ê°ìƒí‰)</label>
            <textarea id="review" class="form-control" rows="3"></textarea>
        </div>
        <button onclick="makeReview()" type="submit" class="btn btn-primary">ë“±ë¡</button>
    </div>

    <br><br><br>

    <div>
        <table class="table">
            <thead>
            <tr>
                <th scope="col">id</th>
                <th scope="col">ì˜í™”ì œëª©</th>
                <th scope="col">í›„ê¸°(ê°ìƒí‰)</th>
            </tr>
            </thead>

            <tbody id="reviews-box">
            </tbody>
        </table>
    </div>
</div>

<br>

<!-- FOOTER -->
<footer>
    <p style="text-align: center;">MARVEL ê³µì‹ í™ˆí˜ì´ì§€ : <a href="https://www.marvel.com/">https://www.marvel.com/</a></p>
    <p style="text-align: center;"> í˜ì´ì§€ì— ëŒ€í•œ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì—°ë½ì£¼ì„¸ìš”:) ajs8809@naver.com</p>
    <p class="float-end" style="text-align: center;"><a href="#">Back to top</a></p>
</footer>
<br>
<hr>
<br>
<p style="text-align: center; font-size: 25px"> ë” ì´ìƒ ë‚´ë¦¬ì…”ë„ ì•„ë¬´ê²ƒë„ ì—†ì–´ìš”ğŸ˜… </p>

</body>
</html>